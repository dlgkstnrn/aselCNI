<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aselcni.CsgItemMapper">
					
	<select id="custList" resultType = "CSG_TB_CUSTMST">
		select DISTINCT tc.*, tp.CUST_EMP
		from TB_ITEMMST ti
		inner JOin TB_CUSTMST tc on tc.CUST_CD  = ti.CUST_CD 
		inner JoIn TB_PURCHASE tp on tp.CUST_CD = tc.CUST_CD
	</select>
	
	<select id="findCustEmpByCustCd" parameterType="String" resultType="CSG_TB_PURCHASE">
        SELECT tp.CUST_EMP
        FROM TB_PURCHASE tp 
        WHERE tp.CUST_CD = #{cust_cd}
    </select>
	
	
	<select id="SK_bigTypeList" parameterType="String" resultType="CSG_TB_TYPE_BIG">
		SELECT DISTINCT  ttb.*, tc.cust_nm
		from TB_ITEMMST ti
		Inner join TB_TYPE_BIG ttb on ti.BIG_NO = ttb.BIG_NO
		Inner join TB_CUSTMST tc on tc.CUST_CD = ti.CUST_CD
		where ti.CUST_CD = #{cust_cd}
		
	</select>
	
	<select id="SK_MidTypeList" parameterType="CSG_TB_TYPE_MID" resultType="CSG_TB_TYPE_MID">
		SELECT DISTINCT ttm.*
		FROM TB_TYPE_MID ttm
		INNER JOIN TB_ITEMMST ti ON ti.BIG_NO = ttm.BIG_NO  AND  ti.MID_NO = ttm.MID_NO 
		WHERE ttm.BIG_NO = #{big_no}
		and ti.CUST_CD = #{cust_cd}
		and ti.ITEM_FLAG = 1
	</select>
	
	<select id="SK_smlTypeList" parameterType="CSG_TB_TYPE_SML" resultType="CSG_TB_TYPE_SML">
		SELECT DISTINCT tts.*
		FROM TB_TYPE_SML tts
		INNER JOIN TB_ITEMMST ti ON ti.BIG_NO = tts.BIG_NO  
			AND ti.MID_NO = tts.MID_NO 
			AND ti.SML_NO = tts.SML_NO 
		WHERE tts.BIG_NO = #{big_no}
		AND ti.MID_NO = #{mid_no}
		and ti.CUST_CD =  #{cust_cd}
		and ti.ITEM_FLAG = 1
	</select>
	
<select id="selectedItemsList" parameterType="CSG_TB_ITEMMST" resultType="CSG_TB_ITEMMST">
	SELECT ti.*, pi.*
	FROM TB_ITEMMST ti
	JOIN TB_TYPE_SML tts ON ti.BIG_NO = tts.BIG_NO AND ti.MID_NO = tts.MID_NO AND ti.SML_NO = tts.SML_NO
	JOIN TB_PURCHASE_ITEM pi ON ti.ITEM_CD = pi.ITEM_CD
	WHERE ti.BIG_NO = #{big_no} 
	  AND ti.MID_NO = #{mid_no} 
	  AND ti.SML_NO = #{sml_no}
	  and ti.CUST_CD = #{cust_cd}
	  AND ti.ITEM_FLAG = 1;
</select>

	
</mapper>